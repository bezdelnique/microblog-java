<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout (~{::body},'hello')}">

<body>

<div class="container">

    <h3>Post Directory</h3>
    <hr>

    <p class="h4 mb-4">Save Post</p>

    <form action="#" th:action="@{/post/save}"
          th:object="${post}" method="POST">

        <!-- Add hidden form field to handle update -->
        <input type="hidden" th:field="*{id}"/>

        <div class="form-inline">
            <input type="text" th:field="*{title}"
                   class="form-control mb-4 col-4" placeholder="Post title">

            <!-- Add error message (if present) -->
            <span th:if="${#fields.hasErrors('title')}"
                  th:errors="*{title}"
                  class="badge badge-danger ml-2 mb-4"></span>

        </div>

        <div class="form-inline">
            <textarea class="form-control mb-4 col-4" th:field="*{content}"></textarea>

            <span th:if="${#fields.hasErrors('content')}"
                  th:errors="*{content}"
                  class="badge badge-danger ml-2 mb-4"></span>
        </div>

        <button type="submit" class="btn btn-info col-2">Save</button>
    </form>

    <hr>
    <a th:href="@{/post/list}">Back to Posts List</a>
</div>
</body>

</html>
